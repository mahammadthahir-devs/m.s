<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>HBD Tannu</title>
    <link type="text/css" rel="stylesheet" href="./file/default.css">
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #ffe; font-family: "ÂæÆËΩØÈõÖÈªë", "Microsoft YaHei", sans-serif;
            overflow-x: hidden;
        }
        
        /* Flexbox layout: Mobile par vertical, Desktop par horizontal */
        #main {
            display: flex;
            flex-direction: column; 
            align-items: center;
            width: 100%;
            min-height: 100vh;
        }

        #text {
            width: 90%;
            max-width: 600px;
            padding: 20px;
            margin-top: 20px;
            z-index: 100;
        }

        #code {
            display: none;
            font-size: 16px;
            color: #ff4d6d;
            line-height: 1.6;
        }

        .say { display: block; margin-bottom: 5px; }

        /* Canvas container jo screen size ke hisab se adjust hoga */
        #canvas-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            flex-grow: 1;
        }

        canvas {
            max-width: 100%;
            height: auto !important; /* Mobile pe aspect ratio maintain karega */
        }

        #clock-box {
            position: absolute;
            bottom: 20px;
            width: 100%;
            text-align: center;
            font-size: 14px;
            color: #a020f0;
            font-weight: bold;
        }

        @media (min-width: 800px) {
            #main { flex-direction: row; justify-content: center; }
            #text { width: 400px; margin-top: 0; }
        }

        /* Floating Hearts */
        .heart-particle {
            position: fixed;
            pointer-events: none;
            z-index: 999;
            animation: fly 3s linear forwards;
        }
        @keyframes fly {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100vh) scale(1.5); opacity: 0; }
        }
    </style>
    <script type="text/javascript" src="./file/jquery.min.js"></script>
    <script type="text/javascript" src="./file/jscex.min.js"></script>
    <script type="text/javascript" src="./file/jscex-parser.js"></script>
    <script type="text/javascript" src="./file/jscex-jit.js"></script>
    <script type="text/javascript" src="./file/jscex-builderbase.min.js"></script>
    <script type="text/javascript" src="./file/jscex-async.min.js"></script>
    <script type="text/javascript" src="./file/jscex-async-powerpack.min.js"></script>
    <script type="text/javascript" src="./file/functions.js" charset="utf-8"></script>
    <script type="text/javascript" src="./file/love.js" charset="utf-8"></script>
</head>
<body>
    <audio id="myAudio" loop><source src="aud.mp3" type="audio/mp3" /></audio>
    
    <div id="main">
        <div id="text">
            <div id="code">
                <span class="say">Assalamalikum Mare Jaanüíå</span><br>
                <span class="say">Happy Birthday Re shazhadiüë∏</span><br>
                <span class="say">I love you so much re Tannuüíñ</span><br>
                <span class="say">Thank you For coming Into my life‚ò∫Ô∏è</span><br>
                <span class="say">Always be happy, i am so sryüôá‚Äç‚ôÇÔ∏è</span><br>
                <span class="say">You're the prettiest person in my life‚ù§Ô∏è</span><br>
                <span class="say">Allah hamesha tujhe khush rakheüíï</span><br>
                <span class="say">Enjoy your day! Teri hasi sabse pyari hai‚ù§Ô∏èüòò</span><br>
                <span class="say">Kabhi overthink mat kar, bas padhai pe dhyan de.</span><br>
                <span class="say">Meri life me sabse badh kar tu hai. Thank you Tannuüíû</span>
            </div>
        </div>

        <div id="canvas-container">
            <canvas id="canvas"></canvas>
            <div id="clock-box">
                <span id="clock">Days together...</span>
            </div>
        </div>
    </div>

    <script>
    (function() {
        var canvas = $('#canvas');
        var audio = document.getElementById("myAudio");

        // Mobile Responsive Dimension Logic
        var viewWidth = $(window).width();
        var canvasWidth = viewWidth > 600 ? 650 : viewWidth * 0.95;
        var canvasHeight = viewWidth > 600 ? 500 : 450;
        
        canvas.attr("width", canvasWidth);
        canvas.attr("height", canvasHeight);

        var opts = {
            seed: { x: canvasWidth / 2, color: "rgb(190, 26, 37)", scale: 2 },
            branch: [ [535, 680, 570, 250, 500, 200, 30, 100, [ [540, 500, 455, 417, 340, 400, 13, 100, [ [450, 435, 434, 430, 394, 395, 2, 40] ] ], [550, 445, 600, 356, 680, 345, 12, 100, [ [578, 400, 648, 409, 661, 426, 3, 80] ] ], [539, 281, 537, 248, 534, 217, 3, 40], [546, 397, 413, 247, 328, 244, 9, 80, [ [427, 286, 383, 253, 371, 205, 2, 40], [498, 345, 435, 315, 395, 330, 4, 60] ] ], [546, 357, 608, 252, 678, 221, 6, 100, [ [590, 293, 646, 277, 648, 271, 2, 80] ] ] ] ] ],
            bloom: { num: 500, width: 1080, height: 650 },
            footer: { width: 1200, height: 5, speed: 10 }
        };

        var tree = new Tree(canvas[0], canvasWidth, canvasHeight, opts);
        var seed = tree.seed;
        var hold = 1;

        // Start interaction for Mobile & Desktop
        canvas.on("click touchstart", function(e) {
            audio.play();
            hold = 0;
            spawnHearts();
            canvas.unbind("click touchstart");
        });

        function spawnHearts() {
            setInterval(function() {
                var h = $('<div class="heart-particle">‚ù§Ô∏è</div>').css({
                    left: Math.random() * 100 + "vw",
                    top: "100vh",
                    fontSize: (Math.random() * 20 + 10) + "px"
                });
                $('body').append(h);
                setTimeout(function() { h.remove(); }, 3000);
            }, 400);
        }

        var runAsync = eval(Jscex.compile("async", function () {
            // Seed animation
            seed.draw();
            while (hold) { $await(Jscex.Async.sleep(10)); }
            while (seed.canScale()) { seed.scale(0.95); $await(Jscex.Async.sleep(10)); }
            while (seed.canMove()) { seed.move(0, 2); $await(Jscex.Async.sleep(10)); }
            
            // Tree Growing
            do { tree.grow(); $await(Jscex.Async.sleep(10)); } while (tree.canGrow());
            do { tree.flower(2); $await(Jscex.Async.sleep(10)); } while (tree.canFlower());
            
            // Text Show
            $("#code").show().typewriter();
        }));

        runAsync().start();
    })();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HBD love</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="./file/default.css">

<script src="./file/jquery.min.js"></script>
<script src="./file/jscex.min.js"></script>
<script src="./file/jscex-parser.js"></script>
<script src="./file/jscex-jit.js"></script>
<script src="./file/jscex-builderbase.min.js"></script>
<script src="./file/jscex-async.min.js"></script>
<script src="./file/jscex-async-powerpack.min.js"></script>
<script src="./file/functions.js"></script>
<script src="./file/love.js"></script>

<style>
body{
  margin:0;
  overflow-x:hidden;
}

#wrap{
  width:1100px;
  margin:0 auto;
}

/* ðŸ‘‡ MOBILE AUTO ZOOM */
.container{
  display:flex;
  justify-content:center;
}

.scaler{
  transform-origin: top center;
}

/* extra text fixes */
#text{
  text-align:center;
}
</style>

<script>
function playAudio(){
  document.getElementById("myAudio").play();
}
</script>

</head>

<body>

<audio autoplay id="myAudio">
  <source src="aud.mp3" type="audio/mp3">
</audio>

<div class="container">
  <div id="wrap" class="scaler">

    <div id="text">
      <div id="code">
        <span class="say">Assalamalikum Mare JaanðŸ’Œ</span><br>
        <span class="say">Happy Birthday Re Shazhadi ðŸ‘¸</span><br>
        <span class="say">I love you so much Tannu ðŸ’–</span><br>
        <span class="say">Thank you for coming into my life ðŸ˜Š</span><br>
      </div>
    </div>

    <div id="clock-box" style="text-align:center;">
      <span id="clock">577 days 0 hours 0 minutes 0 seconds</span>
    </div>

    <!-- ORIGINAL SIZE â€” DON'T CHANGE -->
    <canvas id="canvas" width="1100" height="680"></canvas>

  </div>
</div>

<script>
(function () {

  // ðŸ‘‡ AUTO SCALE (NO DISTORT)
  function scaleSite(){
    var ww = window.innerWidth;
    var base = 1100;
    var scale = ww / base;

    if(scale > 1) scale = 1;   // desktop me normal
    document.querySelector(".scaler").style.transform =
      "scale(" + scale + ")";
  }

  scaleSite();
  window.onresize = scaleSite;

  var canvas = $('#canvas');

  if (!canvas[0].getContext) return;

  var width = canvas.width();
  var height = canvas.height();

  var tree = new Tree(canvas[0], width, height, {
    seed:{ x: width/2 - 20, color:"rgb(190,26,37)", scale:2 },
    branch: BRANCHES,           // <-- functions.js ke andar hi hai
    bloom:{ num:700, width:1080, height:650 },
    footer:{ width:1200, height:5, speed:10 }
  });

  var seed = tree.seed;
  var foot = tree.footer;
  var hold = 1;

  canvas.click(function(e){
    playAudio();
    var offset = canvas.offset();
    var x = e.pageX - offset.left;
    var y = e.pageY - offset.top;

    if (seed.hover(x,y)){
      hold = 0;
      canvas.unbind("click").unbind("mousemove").removeClass("hand");
    }
  }).mousemove(function(e){
    var offset = canvas.offset();
    var x = e.pageX - offset.left;
    var y = e.pageY - offset.top;
    canvas.toggleClass("hand", seed.hover(x,y));
  });

  var seedAnimate = eval(Jscex.compile("async", function () {
    seed.draw();
    while (hold) { $await(Jscex.Async.sleep(10)); }
    while (seed.canScale()) { seed.scale(0.95); $await(Jscex.Async.sleep(10)); }
    while (seed.canMove()) { seed.move(0,2); foot.draw(); $await(Jscex.Async.sleep(10)); }
  }));

  var growAnimate = eval(Jscex.compile("async", function () {
    do { tree.grow(); $await(Jscex.Async.sleep(10)); } while (tree.canGrow());
  }));

  var flowAnimate = eval(Jscex.compile("async", function () {
    do { tree.flower(2); $await(Jscex.Async.sleep(10)); } while (tree.canFlower());
  }));

  var textAnimate = eval(Jscex.compile("async", function () {
    $("#code").show().typewriter();
  }));

  var runAsync = eval(Jscex.compile("async", function () {
    $await(seedAnimate());
    $await(growAnimate());
    $await(flowAnimate());
    textAnimate().start();
  }));

  runAsync().start();
})();
</script>

</body>
</html>
